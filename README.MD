# 1С Native компонента работы с Redis
## Список свойств компоненты:
### ErrorCode
Код ошибки последней выполненой функции. Помогает определить тип ошибки и выполнить определенные действия.
Смотреть в описании методов возвращаемое значение с пометкой ```[ошибка]```. 
#### Коды ошибок:
- 0 - нет ошибки
- -1 - ошибка в подключении к серверу
- -2 - ошибка Redis
- -3 - ошибка использующаяся компонентой (отсутствие значения в Redis и другие)

### ErrorMsg
Текст ошибки последней выполненой операции.

## Список методов компоненты:
### Connect
Установка соединения с сервером Redis.

Параметры:
- host - Строка - адрес сервера Redis
- port - Число - порт Redis
- useTLS - Булево [optional, default = Ложь] - использовать защищенное соединение (поддерживается TLSv1.3, верификация сертификата сервера)
- timeout - Число [optional, default = 10] - таймаут на подключение в секундах

Возвращаемое значение: Истина - подключение установлено, Ложь [ошибка] - подключение не установлено.

### Auth
Авторизация пользователя в Redis.

Параметры:
- username - Строка - Имя пользователя
- password - Строка - Пароль

Возвращаемое значение: Истина - авторизация прошла успешно, Ложь [ошибка] - авторизация завершилась с ошибкой.

### LPush
Добавить элемент в начало списка.

Параметры:
- listname - Строка - наименование списка
- value - Строка - значение, которое нужно добавить в список

Возвращаемое значение: Истина - элемент добавлен, Ложь [ошибка] - не удалось добавить элемент.

### RPush
Добавить элемент в конец списка.

Параметры:
- listname - Строка - наименование списка
- value - Строка - значение, которое нужно добавить в список

Возвращаемое значение: Истина - элемент добавлен, Ложь [ошибка] - не удалось добавить элемент.

### LPop
Получить первый элемент списка.

Параметры:
- listname - Строка - наименование списка

Возвращаемое значение: [Строка] - значение элемента, Неопределено [ошибка] - не удалось получить элемент.

### RPop
Получить последний элемент списка.

Параметры:
- listname - Строка - наименование списка

Возвращаемое значение: [Строка] - значение элемента, Неопределено [ошибка] - не удалось получить элемент.

### ListSize
Получить размер списка.

Параметры:
- listname - Строка - наименование списка

Возвращаемое значение: (-1) [ошибка] - не удалось получить размер списка, [Число] - размер списка.

### SetKey
Установить значение ключа.

Параметры:
- keyname - Строка - наименование ключа
- value - Строка - значение ключа
- timeout - Число [optional] - время жизни ключа в миллисекундах
- nx_xx - Число [optional] - (1) установить ключ только если он не существует, (2) установить ключ только если он существует
- keepttl - Булево [optional] - Сохранить время жизни ключа

Возвращаемое значение: Истина - ключ установлен, Ложь [ошибка] - не удалось установить ключ.

### GetKey
Получить значение ключа.

Параметры:
- keyname - Строка - наименование ключа

Возвращаемое значение: [Строка] - значение ключа, Неопределено [ошибка] - не удалось получить значение ключа.

### RemoveKey
Удалить ключ.

Параметры:
- keyname - Строка - наименование ключа

Возвращаемое значение: Истина - ключ удален, Ложь [ошибка] - не удалось удалить ключ.

### SetTimeOut
Установить таймаут операций соединения.

Параметры:
- write_timeout - Число [optional] - таймаут отправки данных через соединение
- read_timeout - Число [optional] - таймаут чтения данных через соединение

Возвращаемое значение: Истина - таймаут установлен, Ложь [ошибка] - не удалось установить таймаут.

## Работа с компонентой из 1С
1. Подключение компоненты
```bsl
Результат = ПодключитьВнешнююКомпоненту("ПутьКФайлуКомпоненты", "RedisNative", ТипВнешнейКомпоненты.Native);
```
2. Создание объекта компоненты
```bsl
Компонента = Новый ("AddIn.RedisNative.Redis");
```
3. Подключение к Redis
```bsl
Если НЕ Компонента.Connect("redis.server.lan", 6379, Ложь, 10) Тогда
    Сообщить("Ошибка подключения: " + Компонента.ТекстОшибки);
    Возврат;
КонецЕсли;
```
4. Добавление и получение элементов списка
```bsl
ИмяСписка = "example-list";
Данные = "example data";
Если НЕ Компонента.lpush(ИмяСписка, Данные) Тогда
    Сообщить("Ошибка: " + Компонента.ТекстОшибки);
    Возврат;
КонецЕсли;

Значение = Компоненета.lpop(ИмяСписка);
Если Значение = Неопределено Тогда
    Сообщить("Ошибка: " + Компонента.ТекстОшибки);
Иначе
    Сообщить(Значение);
КонецЕсли;
```

## Поддерживаемые ОС
- Windows